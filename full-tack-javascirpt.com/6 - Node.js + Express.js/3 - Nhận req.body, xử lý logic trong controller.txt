[Ngá»¯ cáº£nh #3] Nháº­n req.body, xá»­ lÃ½ logic trong controller

ğŸ“„ server.js (khÃ´ng Ä‘á»•i)
- Äáº£m báº£o cÃ³ dÃ²ng:
  app.use(express.json());

ğŸ“„ routes/user.route.js (khÃ´ng Ä‘á»•i)
router.post('/', userController.createUser);

ğŸ“„ controllers/user.controller.js (Ä‘Ã£ cáº­p nháº­t)

let users = [];

exports.getAllUsers = (req, res) => {
  res.json(users);
};

exports.createUser = (req, res) => {
  const { name, email } = req.body;

  // Kiá»ƒm tra dá»¯ liá»‡u
  if (!name || !email) {
    return res.status(400).json({ error: 'Vui lÃ²ng nháº­p Ä‘á»§ name vÃ  email' });
  }

  // Kiá»ƒm tra trÃ¹ng email
  const existed = users.find(user => user.email === email);
  if (existed) {
    return res.status(409).json({ error: 'Email Ä‘Ã£ tá»“n táº¡i' });
  }

  // Táº¡o má»›i user
  const newUser = { id: users.length + 1, name, email };
  users.push(newUser);

  res.status(201).json(newUser);
};

ğŸ“Œ Test:
- POST http://localhost:3000/users
  Body:
  {
    "name": "Trung",
    "email": "trung@example.com"
  }

- Náº¿u thiáº¿u name/email â†’ lá»—i 400
- Náº¿u email Ä‘Ã£ tá»“n táº¡i â†’ lá»—i 409
- Náº¿u há»£p lá»‡ â†’ tráº£ vá» user má»›i

ğŸ’¡ LÆ°u Ã½:
- express.json() lÃ  middleware Ä‘á»ƒ Ä‘á»c body dáº¡ng JSON
- req.body dÃ¹ng trong POST Ä‘á»ƒ láº¥y dá»¯ liá»‡u client gá»­i lÃªn
