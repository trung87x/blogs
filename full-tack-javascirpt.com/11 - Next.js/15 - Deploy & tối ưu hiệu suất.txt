ğŸ§  Model 15: Deploy & tá»‘i Æ°u hiá»‡u suáº¥t
--------------------------------------------------
â€¢ Vai trÃ²: ÄÆ°a á»©ng dá»¥ng lÃªn mÃ´i trÆ°á»ng production, Ä‘áº£m báº£o táº£i nhanh, tá»‘i Æ°u SEO, giáº£m chi phÃ­ tÃ i nguyÃªn.
â€¢ Controller: DÃ¹ng `next build`, `vercel`, tá»‘i Æ°u vá»›i caching, ISR (Incremental Static Regeneration), edge functions...

ğŸ“˜ Ngá»¯ cáº£nh #15: Deploy & tá»‘i Æ°u hiá»‡u suáº¥t cho á»©ng dá»¥ng Next.js
-------------------------------------------------------------------

ğŸš€ 1. Build á»©ng dá»¥ng

```bash
npm run build      # Build production
npm run start      # Khá»Ÿi cháº¡y local production
```

âš™ï¸ 2. Deploy lÃªn Vercel

- Truy cáº­p [https://vercel.com](https://vercel.com)
- Káº¿t ná»‘i GitHub â†’ Import repo â†’ chá»n "Framework: Next.js"
- Vercel sáº½ tá»± Ä‘á»™ng detect vÃ  deploy vá»›i:
  - `next build`
  - Há»— trá»£ cáº£ SSR, SSG, ISR
  - Domain máº·c Ä‘á»‹nh + tÃ¹y chá»‰nh

ğŸï¸ 3. Tá»‘i Æ°u tá»‘c Ä‘á»™ táº£i trang

âœ… a. DÃ¹ng ISR (Incremental Static Regeneration):

```ts
// app/blog/[slug]/page.tsx
export const revalidate = 60 // Revalidate má»—i 60s

export default async function Page({ params }) {
  const post = await getPost(params.slug)
  return <div>{post.title}</div>
}
```

âœ… b. DÃ¹ng caching há»£p lÃ½ trong API route:

```ts
export const dynamic = 'force-dynamic'  // hoáº·c 'force-static', 'auto'
export const revalidate = 300           // API nÃ y cache trong 5 phÃºt
```

âœ… c. Tá»‘i Æ°u áº£nh:

```tsx
import Image from 'next/image'

<Image
  src="/hero.jpg"
  alt="Hero"
  width={1200}
  height={600}
  priority
/>
```

âœ… d. Sá»­ dá»¥ng CDN, edge function:

- Vercel tá»± Ä‘á»™ng phÃ¢n phá»‘i static vÃ  ISR qua CDN edge.
- CÃ³ thá»ƒ dÃ¹ng `app/api/hello/route.ts` lÃ m API á»Ÿ edge (gáº§n client hÆ¡n).

âœ… e. Prefetch, preload:

- `next/link` tá»± Ä‘á»™ng prefetch.
- DÃ¹ng `priority` cho áº£nh hoáº·c `preload` script quan trá»ng.

âœ… f. Giáº£m bundle size:

- Import chÃ­nh xÃ¡c: `import lodash/isEmpty` thay vÃ¬ toÃ n bá»™ lodash.
- Tá»‘i Æ°u dynamic import:

```tsx
const Chart = dynamic(() => import('./Chart'), { ssr: false })
```

ğŸ” 4. Äo hiá»‡u suáº¥t

- DÃ¹ng [Lighthouse](https://pagespeed.web.dev/)
- Hoáº·c tab "Analytics" trong Vercel â†’ Core Web Vitals

ğŸ¯ Káº¿t luáº­n:
- DÃ¹ng `vercel` Ä‘á»ƒ deploy Next.js cá»±c ká»³ nhanh chÃ³ng.
- ISR giÃºp build static linh hoáº¡t, khÃ´ng cáº§n rebuild toÃ n bá»™.
- CÃ¡c ká»¹ thuáº­t cache, preload, edge Ä‘á»u Ä‘Æ°á»£c tÃ­ch há»£p máº·c Ä‘á»‹nh.

