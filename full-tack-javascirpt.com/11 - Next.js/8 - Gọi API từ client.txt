ğŸ§  Model 8: Gá»i API tá»« client (Client-Side Rendering - CSR)
------------------------------------------------------------
â€¢ Vai trÃ²: Truy xuáº¥t dá»¯ liá»‡u sau khi trang Ä‘Ã£ render trÃªn trÃ¬nh duyá»‡t.
â€¢ Controller: DÃ¹ng `fetch()` trong `useEffect()` tá»« component React.

ğŸŒ Ngá»¯ cáº£nh #8: Hiá»ƒn thá»‹ danh sÃ¡ch sáº£n pháº©m tá»« API `/api/products`
--------------------------------------------------------------------
â€¢ Má»¥c tiÃªu: Fetch danh sÃ¡ch sáº£n pháº©m tá»« backend (API route) sau khi trang Ä‘Æ°á»£c render.

ğŸ§± 1. API cÃ³ sáºµn (Ä‘Ã£ lÃ m á»Ÿ Ngá»¯ cáº£nh #7):

```ts
// app/api/products/route.ts
export async function GET() {
  const products = await prisma.product.findMany()
  return NextResponse.json(products)
}
```

ğŸ¨ 2. Component: Gá»i API tá»« client vÃ  hiá»ƒn thá»‹ dá»¯ liá»‡u

```tsx
'use client'

import { useEffect, useState } from 'react'

type Product = {
  id: number
  name: string
  price: number
}

export default function ProductList() {
  const [products, setProducts] = useState<Product[]>([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    fetch('/api/products')
      .then(res => res.json())
      .then(data => {
        setProducts(data)
        setLoading(false)
      })
      .catch(err => {
        console.error('Failed to fetch products:', err)
        setLoading(false)
      })
  }, [])

  if (loading) return <p>Äang táº£i sáº£n pháº©m...</p>

  return (
    <ul>
      {products.map(product => (
        <li key={product.id}>
          {product.name} - {product.price}â‚«
        </li>
      ))}
    </ul>
  )
}
```

ğŸ“Œ 3. TÃ­ch há»£p vÃ o trang chÃ­nh `app/page.tsx`:

```tsx
import ProductList from './ProductList'

export default function HomePage() {
  return (
    <main>
      <h1>Sáº£n pháº©m ná»•i báº­t</h1>
      <ProductList />
    </main>
  )
}
```

âœ… Káº¿t quáº£:
- Khi ngÆ°á»i dÃ¹ng má»Ÿ trang, React gá»i API `/api/products`.
- Loading UI hiá»ƒn thá»‹ trong khi Ä‘á»£i dá»¯ liá»‡u.
- Danh sÃ¡ch sáº£n pháº©m Ä‘Æ°á»£c render sau khi fetch xong.

ğŸ“š Ghi nhá»›:
- CSR thÃ­ch há»£p cho dá»¯ liá»‡u thay Ä‘á»•i thÆ°á»ng xuyÃªn.
- DÃ¹ng `useEffect()` Ä‘áº£m báº£o gá»i API sau khi component mount.
- CÃ³ thá»ƒ káº¿t há»£p `useSWR` Ä‘á»ƒ caching, revalidation, v.v.

ğŸ§  Má»Ÿ rá»™ng:
- Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i náº¿u fetch tháº¥t báº¡i.
- ThÃªm pagination, lá»c sáº£n pháº©m theo giÃ¡, tÃªn, v.v.
- Káº¿t há»£p vá»›i loading skeleton thay vÃ¬ dÃ²ng chá»¯ "Äang táº£i..."
