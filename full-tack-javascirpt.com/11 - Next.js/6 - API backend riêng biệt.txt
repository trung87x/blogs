ğŸ§  Model 6: API backend riÃªng biá»‡t trong Next.js
---------------------------------------------------
â€¢ Vai trÃ²: Táº¡o backend API ná»™i bá»™ trong dá»± Ã¡n Next.js (RESTful).
â€¢ Controller:
  - Táº¡o file trong `app/api/` Ä‘á»ƒ Ä‘á»‹nh nghÄ©a cÃ¡c route API nhÆ° `/api/products`, `/api/user/[id]`.
  - Sá»­ dá»¥ng `Request`, `Response` tÆ°Æ¡ng tá»± Node.js.

ğŸŒ Ngá»¯ cáº£nh #6: Táº¡o API `/api/products` tráº£ vá» danh sÃ¡ch sáº£n pháº©m JSON
-------------------------------------------------------------------------
â€¢ Má»¥c tiÃªu: Giáº£ láº­p backend tráº£ danh sÃ¡ch sáº£n pháº©m Ä‘á»ƒ frontend fetch.
â€¢ PhÃ¹ há»£p khi cáº§n API dÃ¹ng chung cho cáº£ SSR, CSR, SSG hoáº·c tá»« á»©ng dá»¥ng mobile.

ğŸ“ Cáº¥u trÃºc thÆ° má»¥c:

app/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ products/
â”‚       â””â”€â”€ route.ts
â””â”€â”€ search/
    â””â”€â”€ page.tsx

âœï¸ MÃ£ nguá»“n:

// app/api/products/route.ts
import { NextResponse } from 'next/server'

export async function GET() {
  const products = [
    { id: 1, name: 'MacBook Pro', price: 2000 },
    { id: 2, name: 'iPhone 15', price: 1200 },
    { id: 3, name: 'iPad Air', price: 800 },
  ]
  return NextResponse.json(products)
}

âœ… Sá»­ dá»¥ng á»Ÿ client (CSR):

// fetch tá»« client (VD: trong useEffect)
fetch('/api/products')
  .then(res => res.json())
  .then(data => console.log(data))

âœ… Sá»­ dá»¥ng á»Ÿ server (SSR, SSG):

// trong getServerSideProps hoáº·c fetch trong async component
const res = await fetch('http://localhost:3000/api/products')
const products = await res.json()

âœ… Káº¿t quáº£:
- API `/api/products` hoáº¡t Ä‘á»™ng giá»‘ng backend tháº­t.
- DÃ¹ng Ä‘Æ°á»£c cho cáº£ SSR, SSG, CSR.
- CÃ³ thá»ƒ xá»­ lÃ½ GET, POST, PUT, DELETE nhÆ° Express.

ğŸ¯ Ghi nhá»›:
- Má»—i file `route.ts` trong `app/api/` tÆ°Æ¡ng Ä‘Æ°Æ¡ng 1 route.
- CÃ¡c HTTP method nhÆ° `GET`, `POST` lÃ  export riÃªng biá»‡t.
- ÄÃ¢y lÃ  cÃ¡ch Next.js tÃ­ch há»£p backend mÃ  khÃ´ng cáº§n Express.
