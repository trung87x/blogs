===========================================
ğŸ§© Ngá»¯ cáº£nh #1: ÄÄƒng kÃ½ ngÆ°á»i dÃ¹ng
===========================================

ğŸ§  MÃ´ hÃ¬nh (Model) â€“ Ã nghÄ©a:
NgÆ°á»i dÃ¹ng Ä‘Äƒng kÃ½ (sign up) Ä‘á»ƒ táº¡o tÃ i khoáº£n má»›i.
Dá»¯ liá»‡u: name, email, password.

---

ğŸ› ï¸ Controller â€“ CÃ¡c bÆ°á»›c xá»­ lÃ½:
1. Nháº­n POST request vá»›i dá»¯ liá»‡u ngÆ°á»i dÃ¹ng.
2. Kiá»ƒm tra email Ä‘Ã£ tá»“n táº¡i trong DB chÆ°a.
3. Náº¿u chÆ°a:
   - MÃ£ hÃ³a máº­t kháº©u báº±ng bcrypt
   - LÆ°u ngÆ°á»i dÃ¹ng vÃ o MongoDB
4. Gá»­i pháº£n há»“i thÃ nh cÃ´ng vá» client

---

ğŸ“¦ CÃ i cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t:
npm install express mongoose bcrypt

---

ğŸ“„ File: models/User.js
-----------------------------------
const mongoose = require('mongoose');

const UserSchema = new mongoose.Schema({
  name: {
    type: String,
    required: true,
    trim: true
  },
  email: {
    type: String,
    required: true,
    unique: true,
    lowercase: true
  },
  password: {
    type: String,
    required: true
  }
}, { timestamps: true });

module.exports = mongoose.model('User', UserSchema);

---

ğŸ“„ File: routes/auth.js
-----------------------------------
const express = require('express');
const router = express.Router();
const bcrypt = require('bcrypt');
const User = require('../models/User');

router.post('/register', async (req, res) => {
  const { name, email, password } = req.body;

  try {
    // Kiá»ƒm tra email Ä‘Ã£ tá»“n táº¡i
    const existingUser = await User.findOne({ email });
    if (existingUser) {
      return res.status(409).json({ message: 'Email Ä‘Ã£ Ä‘Æ°á»£c Ä‘Äƒng kÃ½' });
    }

    // MÃ£ hÃ³a máº­t kháº©u
    const salt = await bcrypt.genSalt(10);
    const hashedPassword = await bcrypt.hash(password, salt);

    // Táº¡o user má»›i
    const newUser = new User({
      name,
      email,
      password: hashedPassword,
    });

    // LÆ°u vÃ o DB
    await newUser.save();

    // Pháº£n há»“i thÃ nh cÃ´ng
    res.status(201).json({ message: 'ÄÄƒng kÃ½ thÃ nh cÃ´ng' });

  } catch (err) {
    res.status(500).json({ message: 'Lá»—i server', error: err.message });
  }
});

module.exports = router;

---

ğŸ“„ File: server.js (hoáº·c app.js)
-----------------------------------
const express = require('express');
const mongoose = require('mongoose');
const authRoutes = require('./routes/auth');

const app = express();
app.use(express.json());

mongoose.connect('mongodb://localhost:27017/myapp');

app.use('/api/auth', authRoutes);

app.listen(3000, () => {
  console.log('Server cháº¡y á»Ÿ http://localhost:3000');
});

---

ğŸ§ª Test API:
- URL: POST http://localhost:3000/api/auth/register
- Body:
{
  "name": "Trung Äinh",
  "email": "trung@example.com",
  "password": "123456"
}

- Káº¿t quáº£:
{
  "message": "ÄÄƒng kÃ½ thÃ nh cÃ´ng"
}
