ğŸ“¦ Ngá»¯ cáº£nh #2: ThÃªm dá»¯ liá»‡u ban Ä‘áº§u / ÄÄƒng kÃ½ User (MongoDB + Mongoose)

ğŸ§  Model (Ã nghÄ©a)
- Khi ngÆ°á»i dÃ¹ng má»›i Ä‘Äƒng kÃ½, ta cáº§n táº¡o 1 báº£n ghi má»›i trong collection `users`.
- ÄÃ¢y lÃ  thao tÃ¡c "Create" cÆ¡ báº£n vÃ  phá»• biáº¿n nháº¥t trong má»i á»©ng dá»¥ng cÃ³ Ä‘Äƒng nháº­p.

ğŸ› ï¸ Controller (CÃ´ng cá»¥ / CÃ¢u lá»‡nh)
- `User.create(data)` â†’ táº¡o má»›i nhanh chÃ³ng
- `new User(data).save()` â†’ cho phÃ©p xá»­ lÃ½ bá»• sung trÆ°á»›c khi lÆ°u (vÃ­ dá»¥ hash password)
- ThÆ°á»ng dÃ¹ng trong route POST `/register` hoáº·c `/signup`

ğŸ§ª Example (routes/authRoute.js)
const express = require('express');
const bcrypt = require('bcrypt');
const User = require('../models/User');
const router = express.Router();

router.post('/register', async (req, res) => {
  try {
    const { name, email, password } = req.body;

    // Kiá»ƒm tra trÃ¹ng email
    const existing = await User.findOne({ email });
    if (existing) return res.status(400).json({ error: 'Email already exists' });

    // Hash password trÆ°á»›c khi lÆ°u
    const hashed = await bcrypt.hash(password, 10);

    // Táº¡o user má»›i
    const user = await User.create({ name, email, password: hashed });

    res.status(201).json({ message: 'User registered', userId: user._id });
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});

module.exports = router;

ğŸ“ Ghi chÃº:
- NÃªn kiá»ƒm tra trÃ¹ng email trÆ°á»›c khi táº¡o (`findOne`)
- DÃ¹ng `bcrypt.hash()` Ä‘á»ƒ báº£o máº­t máº­t kháº©u
- Tráº£ vá» `user._id` thay vÃ¬ toÃ n bá»™ user Ä‘á»ƒ trÃ¡nh lá»™ thÃ´ng tin nháº¡y cáº£m
- CÃ³ thá»ƒ xá»­ lÃ½ hash password báº±ng `schema.pre('save')` náº¿u dÃ¹ng `new User().save()`
