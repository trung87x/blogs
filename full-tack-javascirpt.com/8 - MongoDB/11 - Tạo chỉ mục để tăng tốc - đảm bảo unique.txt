ğŸ“¦ Ngá»¯ cáº£nh #11: Táº¡o chá»‰ má»¥c Ä‘á»ƒ tÄƒng tá»‘c / Ä‘áº£m báº£o unique (MongoDB + Mongoose)

ğŸ§  Model (Ã nghÄ©a)
- Chá»‰ má»¥c (index) giÃºp truy váº¥n nhanh hÆ¡n (tÄƒng tá»‘c Ä‘á»™ tÃ¬m kiáº¿m)
- CÃ³ thá»ƒ Ä‘áº£m báº£o tÃ­nh duy nháº¥t (unique) cho cÃ¡c trÆ°á»ng quan trá»ng nhÆ° `email`, `username`
- Cá»±c ká»³ cáº§n thiáº¿t trong cÃ¡c á»©ng dá»¥ng cÃ³ nhiá»u báº£n ghi

ğŸ› ï¸ Controller (CÃ´ng cá»¥ / CÃ¢u lá»‡nh)
- DÃ¹ng `schema.index()` Ä‘á»ƒ táº¡o chá»‰ má»¥c tÃ¹y chá»‰nh
- Hoáº·c `{ unique: true }` trá»±c tiáº¿p trong Ä‘á»‹nh nghÄ©a field

ğŸ§ª Example: models/User.js
const mongoose = require('mongoose');
const userSchema = new mongoose.Schema({
  name: String,
  email: {
    type: String,
    required: true,
    unique: true, // Äáº£m báº£o email khÃ´ng trÃ¹ng
    match: /.+\@.+\..+/ // Validate Ä‘á»‹nh dáº¡ng
  },
  username: {
    type: String,
    unique: true
  },
  createdAt: {
    type: Date,
    default: Date.now
  }
});

// Táº¡o chá»‰ má»¥c tá»•ng há»£p cho hiá»‡u nÄƒng hoáº·c logic nÃ¢ng cao
userSchema.index({ email: 1 });
userSchema.index({ username: 1 }, { unique: true });

module.exports = mongoose.model('User', userSchema);

ğŸ“ Ghi chÃº:
- MongoDB sáº½ tá»± táº¡o chá»‰ má»¥c `_id` máº·c Ä‘á»‹nh
- Chá»‰ má»¥c giÃºp tÄƒng hiá»‡u nÄƒng truy váº¥n nhÆ°ng chiáº¿m dung lÆ°á»£ng á»• Ä‘Ä©a
- Náº¿u Ä‘á»•i cáº¥u trÃºc `index`, cáº§n xÃ³a collection hoáº·c dÃ¹ng `dropIndex` trÆ°á»›c
- CÃ³ thá»ƒ xem chá»‰ má»¥c hiá»‡n táº¡i báº±ng Mongo shell: `db.users.getIndexes()`
