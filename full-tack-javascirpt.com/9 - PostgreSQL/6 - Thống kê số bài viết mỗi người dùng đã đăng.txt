# Ngá»¯ cáº£nh 6: Thá»‘ng kÃª sá»‘ bÃ i viáº¿t má»—i ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng

ğŸ§  Model (Ã nghÄ©a dá»¯ liá»‡u & quan há»‡)
- Má»—i ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ cÃ³ nhiá»u bÃ i viáº¿t (quan há»‡ 1-nhiá»u).
- Cáº§n Ä‘áº¿m sá»‘ lÆ°á»£ng bÃ i viáº¿t tÆ°Æ¡ng á»©ng vá»›i tá»«ng ngÆ°á»i dÃ¹ng.
- DÃ¹ng `GROUP BY` Ä‘á»ƒ nhÃ³m theo ngÆ°á»i dÃ¹ng, dÃ¹ng `COUNT(*)` Ä‘á»ƒ Ä‘áº¿m.

ğŸ› ï¸ Controller (SQL)

-- Báº£ng users
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL
);

-- Báº£ng posts
CREATE TABLE posts (
  id SERIAL PRIMARY KEY,
  title TEXT,
  content TEXT,
  user_id INTEGER REFERENCES users(id)
);

-- ThÃªm dá»¯ liá»‡u máº«u
INSERT INTO users (name, email) VALUES
  ('Trung', 'trung@example.com'),
  ('Lan', 'lan@example.com');

INSERT INTO posts (title, content, user_id) VALUES
  ('BÃ i 1', '...', 1),
  ('BÃ i 2', '...', 1),
  ('BÃ i 3', '...', 2);

-- Truy váº¥n thá»‘ng kÃª sá»‘ bÃ i viáº¿t theo ngÆ°á»i dÃ¹ng
SELECT
  users.name,
  COUNT(posts.id) AS total_posts
FROM users
LEFT JOIN posts ON users.id = posts.user_id
GROUP BY users.id, users.name
ORDER BY total_posts DESC;

ğŸ“˜ Ghi chÃº:
- `LEFT JOIN`: Ä‘á»ƒ thá»‘ng kÃª cáº£ ngÆ°á»i dÃ¹ng chÆ°a cÃ³ bÃ i viáº¿t (sáº½ ra 0)
- `COUNT(posts.id)`: Ä‘áº¿m sá»‘ bÃ i viáº¿t
- `GROUP BY`: nhÃ³m theo ngÆ°á»i dÃ¹ng
- `ORDER BY total_posts DESC`: sáº¯p xáº¿p tá»« nhiá»u bÃ i viáº¿t Ä‘áº¿n Ã­t

