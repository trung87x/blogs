# Ứng dụng 2: Kiểm soát dữ liệu từ API

```typescript
// 1. Định nghĩa khuôn mẫu (Interface) cho dữ liệu từ Server
interface UserResponse {
  id: number;
  username: string;
  email: string;
  role: "admin" | "member"; // Chỉ cho phép 1 trong 2 giá trị này
  status?: string; // Dấu ? nghĩa là dữ liệu này có thể có hoặc không
}

// 2. Ép kiểu cho hàm gọi API
async function getUserData(): Promise<UserResponse[]> {
  const response = await fetch("https://api.example.com/users");

  // TypeScript sẽ đảm bảo 'data' tuân thủ đúng cấu trúc UserResponse
  const data: UserResponse[] = await response.json();
  return data;
}

// 3. Sử dụng an toàn
const displayUsers = async () => {
  const users = await getUserData();

  users.forEach((user) => {
    console.log(user.username); // Hợp lệ

    // console.log(user.age);
    // ^ LỖI NGAY LÚC CODE: Property 'age' does not exist on type 'UserResponse'

    if (user.role === "admin") {
      // Logic dành riêng cho admin được bảo vệ chặt chẽ
    }
  });
};
```
